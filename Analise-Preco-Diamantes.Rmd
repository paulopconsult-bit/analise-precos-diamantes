---
title: "An√°lise de Pre√ßos de Diamantes"
author: "Paulo"
date: "`r Sys.Date()`"
output:
  html_document:
    toc: true
    toc_float: true
    theme: readable
    code_folding: show
---

## Introdu√ß√£o

Este relat√≥rio realiza uma an√°lise explorat√≥ria da base `P2-Mispriced-Diamonds.csv`, utilizando gr√°ficos de dispers√£o e categoriza√ß√£o por `clarity`. O arquivo pode ser baixado diretamente do Google Drive ou acessado via unidade mapeada no Windows.

## Fonte dos Dados
- Origem: ...
- Status: P√∫blico / Fict√≠cio
- Este relat√≥rio utiliza a base `P2-Mispriced-Diamonds.csv`.  
- Para reproduzir a an√°lise, baixe o arquivo aqui:

üîó [Download do CSV](https://drive.google.com/file/d/1chAw_lIO47i78vPLyBsRFDPTW-ZECSHC/view?usp=sharing)

## Configura√ß√£o do ambiente

```{r setup, include=FALSE}
knitr::opts_chunk$set(
  echo = TRUE,
  message = FALSE,
  warning = FALSE,
  fig.width = 8,
  fig.height = 6
)

# Diret√≥rio de trabalho (ajuste conforme seu Drive mapeado)
setwd("G:/Meu Drive/R/Analise-Preco-Diamantes/Pasta-Arquivo-Projeto")
```

## Instala√ß√£o e carregamento de pacotes

```{r}
# Instalar e carregar pacotes necess√°rios
pkgs <- c("ggplot2", "data.table", "googledrive")
to_install <- pkgs[!pkgs %in% installed.packages()[, "Package"]]
if (length(to_install)) install.packages(to_install)
invisible(lapply(pkgs, library, character.only = TRUE))
```

## Autentica√ß√£o no Google Drive (autom√°tica)

```{r}
library(googledrive)

# Verifica se j√° existe um token ativo
if (is.null(drive_token())) {
  message("Nenhum token encontrado. Autenticando no Google Drive...")
  drive_auth(scopes = "https://www.googleapis.com/auth/drive")
} else {
  message("J√° autenticado no Google Drive. Seguindo normalmente...")
}
```

## Leitura e inspe√ß√£o dos dados

```{r}
library(data.table)

# Caminho direto para o arquivo no Google Drive mapeado
# Voc√™ l√™ direto da pasta do google drive, via o teu explorador de arquivos (no meu caso: windows)
# Baixar arquivo devido extens√£o ".csv" (Se google sheet, j√° conecta "direto" no link).
mydata <- "G:/Meu Drive/R/Analise-Preco-Diamantes/Pasta-Arquivo-Projeto/P2-Mispriced-Diamonds.csv"
```

## Leitura e inspe√ß√£o dos dados

```{r}
# Carregar os dados
mydata <- fread("P2-Mispriced-Diamonds.csv")

# Inspe√ß√£o
mydata
str(mydata)
dim(mydata)
summary(mydata)
table(mydata$clarity)

# Remover o arquivo se quiser limpar o diret√≥rio
# file.remove("P2-Mispriced-Diamonds.csv")
```

## Gr√°fico de dispers√£o: carat vs price

```{r}
ggplot(data = mydata, aes(x = carat, y = price)) +
  geom_point() +
  labs(title = "Dispers√£o: Carat vs Pre√ßo", x = "Carat", y = "Pre√ßo")
```

## Dispers√£o com vari√°vel categ√≥rica: clarity

```{r}
ggplot(data = mydata, aes(x = carat, y = price, colour = clarity)) +
  geom_point() +
  labs(title = "Dispers√£o por Clarity", x = "Carat", y = "Pre√ßo", colour = "Clarity")
```

## Dispers√£o filtrada com suaviza√ß√£o

```{r}
ggplot(data = mydata[mydata$carat < 2.5, ],
       aes(x = carat, y = price, colour = clarity)) +
  geom_point(alpha = 0.1) +
  geom_smooth() +
  labs(title = "Dispers√£o filtrada (carat < 2.5)", x = "Carat", y = "Pre√ßo")
```

## Conclus√µes

- A rela√ß√£o entre `carat` e `price` √© positiva e clara nos gr√°ficos.
- A vari√°vel `clarity` adiciona uma dimens√£o categ√≥rica importante.
- A filtragem por `carat < 2.5` ajuda a reduzir o impacto de outliers.
- A suaviza√ß√£o com `geom_smooth()` revela tend√™ncias gerais entre peso e pre√ßo.
- Mapear o Google Drive como uma unidade no Explorador de Arquivos do Windows torna o acesso aos dados extremamente pr√°tico: o R pode ler arquivos diretamente como se estivessem em qualquer pasta local, sem necessidade de autentica√ß√£o ou download via API.



