---
title: "An치lise de Pre칞os de Diamantes"
author: "Paulo"
date: "`r Sys.Date()`"
output:
  html_document:
    toc: true
    toc_float: true
    theme: readable
    code_folding: show
---

## Introdu칞칚o

Este relat칩rio realiza uma an치lise explorat칩ria da base `P2-Mispriced-Diamonds.csv`, utilizando gr치ficos de dispers칚o e categoriza칞칚o por `clarity`. O arquivo pode ser baixado diretamente do Google Drive ou acessado via unidade mapeada no Windows.

## Configura칞칚o do ambiente

```{r setup, include=FALSE}
knitr::opts_chunk$set(
  echo = TRUE,
  message = FALSE,
  warning = FALSE,
  fig.width = 8,
  fig.height = 6
)

# Diret칩rio de trabalho (ajuste conforme seu Drive mapeado)
setwd("G:/Meu Drive/R/Analise-Preco-Diamantes/Pasta-Arquivo-Projeto")
```

## Fonte dos Dados
- Origem: Os dados utilizados neste projeto foram obtidos do conjunto Diamonds dispon칤vel no Kaggle:
<a href="https://www.kaggle.com/datasets/shivam2503/diamonds" target="_blank">
Conjunto de dados Diamonds no Kaggle.
</a>

- Status: P칰blico / Fict칤cio
- Este relat칩rio utiliza a base `P2-Mispriced-Diamonds.csv`.  
- Para reproduzir a an치lise, baixe o arquivo aqui:

游댕 [Download do CSV]
<a href="https://drive.google.com/file/d/1chAw_lIO47i78vPLyBsRFDPTW-ZECSHC/view?usp=sharing" target="_blank">
Baixar a base de dados.
</a>

## Instala칞칚o e carregamento de pacotes

```{r}
# Instalar e carregar pacotes necess치rios
pkgs <- c("ggplot2", "data.table", "googledrive")
to_install <- pkgs[!pkgs %in% installed.packages()[, "Package"]]
if (length(to_install)) install.packages(to_install)
invisible(lapply(pkgs, library, character.only = TRUE))
```

## Autentica칞칚o no Google Drive (autom치tica)

```{r}
library(googledrive)

# Verifica se j치 existe um token ativo
if (is.null(drive_token())) {
  message("Nenhum token encontrado. Autenticando no Google Drive...")
  drive_auth(scopes = "https://www.googleapis.com/auth/drive")
} else {
  message("J치 autenticado no Google Drive. Seguindo normalmente...")
}
```

## Leitura e inspe칞칚o dos dados

```{r}
library(data.table)

# Caminho direto para o arquivo no Google Drive mapeado
# Voc칡 l칡 direto da pasta do google drive, via o teu explorador de arquivos (no meu caso: windows)
# Baixar arquivo devido extens칚o ".csv" (Se google sheet, j치 conecta "direto" no link).
mydata <- "G:/Meu Drive/R/Analise-Preco-Diamantes/Pasta-Arquivo-Projeto/P2-Mispriced-Diamonds.csv"
```

## Leitura e inspe칞칚o dos dados

```{r}
# Carregar os dados
mydata <- fread("P2-Mispriced-Diamonds.csv")

# Inspe칞칚o
mydata
str(mydata)
dim(mydata)
summary(mydata)
table(mydata$clarity)

# Remover o arquivo se quiser limpar o diret칩rio
# file.remove("P2-Mispriced-Diamonds.csv")
```

## Gr치fico de dispers칚o: carat vs price

```{r}
ggplot(data = mydata, aes(x = carat, y = price)) +
  geom_point() +
  labs(title = "Dispers칚o: Carat vs Pre칞o", x = "Carat", y = "Pre칞o")
```

## Dispers칚o com vari치vel categ칩rica: clarity

```{r}
ggplot(data = mydata, aes(x = carat, y = price, colour = clarity)) +
  geom_point() +
  labs(title = "Dispers칚o por Clarity", x = "Carat", y = "Pre칞o", colour = "Clarity")
```

## Dispers칚o filtrada com suaviza칞칚o

```{r}
ggplot(data = mydata[mydata$carat < 2.5, ],
       aes(x = carat, y = price, colour = clarity)) +
  geom_point(alpha = 0.1) +
  geom_smooth() +
  labs(title = "Dispers칚o filtrada (carat < 2.5)", x = "Carat", y = "Pre칞o")
```

## 游늵 Relat칩rio publicado

A vers칚o mais recente deste relat칩rio est치 dispon칤vel em:  
<a href="https://paulopconsult-bit.github.io/analise-precos-diamantes/Analise-Preco-Diamantes.html" target="_blank">
Relat칩rio HTML no GitHub Pages.
</a>

## Conclus칫es

- A rela칞칚o entre `carat` e `price` 칠 positiva e clara nos gr치ficos.
- A vari치vel `clarity` adiciona uma dimens칚o categ칩rica importante.
- A filtragem por `carat < 2.5` ajuda a reduzir o impacto de outliers.
- A suaviza칞칚o com `geom_smooth()` revela tend칡ncias gerais entre peso e pre칞o.
- Mapear o Google Drive como uma unidade no Explorador de Arquivos do Windows torna o acesso aos dados extremamente pr치tico: o R pode ler arquivos diretamente como se estivessem em qualquer pasta local, sem necessidade de autentica칞칚o ou download via API.


<hr>
<p><strong>Paulo P. Consult</strong><br>
游늵 Analista de Seguros | Projetos | Data Driven <br>
游깷 <a href="https://www.linkedin.com/in/paulo-data-driven/" target="_blank">Linkedin</a><br>
游닎 paulo.pconsult@gmail.com
</p>
